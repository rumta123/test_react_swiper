// src/components/EventSlider/EventSliderWithSwiper.tsx

import { useEffect, useRef } from 'react';
import { useSelector } from 'react-redux';
import { Swiper, SwiperSlide } from 'swiper/react';
import { Navigation, Autoplay,Pagination } from 'swiper/modules';

// üîπ –ò–º–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π Swiper
import '../../../../node_modules/swiper/swiper.scss';
import '../../../../node_modules/swiper/modules/autoplay.scss';
import '../../../../node_modules/swiper/modules/navigation.scss';
import '../../../../node_modules/swiper/modules/pagination.scss'

// import "swiper/css";
// import "swiper/css/navigation";
// import "swiper/css/pagination";


import type { SwiperClass } from "swiper/react";
import styles from '../../../Components/Dectop/Desktop.module.css';
import "../EventSlider/EventSlider.module.css";
// üîπ Redux: RootState –∏ actions
import type { RootState } from '../../../store/store';
interface EventSliderProps {
  className?: string;
  top?: string | number; 
  left?: string | number; 
  slidesPerView?: number;
}

// üîπ –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏–π
const eventsByPoint = [
  {
    id: 6,
    events: [
      {
        year: "2015",
        text: "13 —Å–µ–Ω—Ç—è–±—Ä—è ‚Äî —á–∞—Å—Ç–Ω–æ–µ —Å–æ–ª–Ω–µ—á–Ω–æ–µ –∑–∞—Ç–º–µ–Ω–∏–µ, –≤–∏–¥–∏–º–æ–µ –≤ –Æ–∂–Ω–æ–π –ê—Ñ—Ä–∏–∫–µ –∏ —á–∞—Å—Ç–∏ –ê–Ω—Ç–∞—Ä–∫—Ç–∏–¥—ã",
      },
      {
        year: "2014",
        text: "–û—Ç–∫—Ä—ã—Ç–∏–µ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã—Ö –≤–æ–ª–Ω –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–µ–π LIGO - —Ä–µ–≤–æ–ª—é—Ü–∏—è –≤ –∞—Å—Ç—Ä–æ—Ñ–∏–∑–∏–∫–µ",
      },
      {
        year: "2013",
        text: "–ú–∏—Å—Å–∏—è Curiosity –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–æ–¥—ã –Ω–∞ –ú–∞—Ä—Å–µ –≤ –ø—Ä–æ—à–ª–æ–º",
      },
      {
        year: "2012",
        text: "–ó–∞–ø—É—Å–∫ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–µ—Å–∫–æ–ø–∞ Gaia –¥–ª—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –ú–ª–µ—á–Ω–æ–≥–æ –ü—É—Ç–∏",
      },
      {
        year: "2011",
        text: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã Space Shuttle –ø–æ—Å–ª–µ 30 –ª–µ—Ç –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ—Ç–æ–≤",
      }
    ]
  },
  {
    id: 5,
    events: [
      {
        year: "2016",
        text: "–¢–µ–ª–µ—Å–∫–æ–ø ¬´–•–∞–±–±–ª¬ª –æ–±–Ω–∞—Ä—É–∂–∏–ª —Å–∞–º—É—é —É–¥–∞–ª—ë–Ω–Ω—É—é –∏–∑ –≤—Å–µ—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –≥–∞–ª–∞–∫—Ç–∏–∫, –ø–æ–ª—É—á–∏–≤—à—É—é –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ GN-z11",
      },
      {
        year: "2017",
        text: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –º–µ–∂–∑–≤–µ–∑–¥–Ω–æ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –û—É–º—É–∞–º—É–∞",
      },
      {
        year: "2018",
        text: "–ó–∞–ø—É—Å–∫ –º–∏—Å—Å–∏–∏ Parker Solar Probe –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –°–æ–ª–Ω—Ü–∞",
      },
      {
        year: "2019",
        text: "–ö–∏—Ç–∞–π—Å–∫–∏–π –ª—É–Ω–æ—Ö–æ–¥ Chang'e 4 —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–µ—Ä–≤—É—é –ø–æ—Å–∞–¥–∫—É –Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –õ—É–Ω—ã",
      },
      {
        year: "2020",
        text: "SpaceX —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–µ—Ä–≤—ã–π –ø–∏–ª–æ—Ç–∏—Ä—É–µ–º—ã–π –ø–æ–ª–µ—Ç –Ω–∞ –ú–ö–° –Ω–∞ –∫–æ—Ä–∞–±–ª–µ Crew Dragon",
      }
    ]
  },
  {
    id: 4,
    events: [
      {
        year: "2017",
        text: "–ö–æ–º–ø–∞–Ω–∏—è Tesla –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ –ø–µ—Ä–≤—ã–π –≤ –º–∏—Ä–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –≥—Ä—É–∑–æ–≤–∏–∫ Tesla Semi",
      },
      {
        year: "2018",
        text: "–ü—Ä–æ—Ä—ã–≤ –≤ –æ–±–ª–∞—Å—Ç–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞: AlphaZero –ø–æ–±–µ–∂–¥–∞–µ—Ç –≤ —à–∞—Ö–º–∞—Ç—ã –∏ –≥–æ",
      },
      {
        year: "2019",
        text: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–∞ Google - –∫–≤–∞–Ω—Ç–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É –∑–∞ 200 —Å–µ–∫—É–Ω–¥",
      },
      {
        year: "2020",
        text: "–ü–∞–Ω–¥–µ–º–∏—è COVID-19 —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ —Ç–µ–ª–µ–º–µ–¥–∏—Ü–∏–Ω—ã –∏ —É–¥–∞–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã",
      },
      {
        year: "2021",
        text: "–ú–µ—Ç–∞–≤—Å–µ–ª–µ–Ω–Ω–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–æ–≤–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–∞—Ä–∞–¥–∏–≥–º–æ–π —Ä–∞–∑–≤–∏—Ç–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞",
      }
    ]
  },
  {
    id: 3,
    events: [
      {
        year: "2018",
        text: "–ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–≥–æ –≤ –º–∏—Ä–µ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ —Å–ø—É—Ç–Ω–∏–∫–∞ —Å–≤—è–∑–∏ ¬´–ú–æ-–¶–∑—ã¬ª",
      },
      {
        year: "2019",
        text: "–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –≤ –º–∏—Ä–µ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ —Å 53 –∫—É–±–∏—Ç–∞–º–∏",
      },
      {
        year: "2020",
        text: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á",
      },
      {
        year: "2021",
        text: "–ö–≤–∞–Ω—Ç–æ–≤–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–µ–π",
      },
      {
        year: "2022",
        text: "–ü—Ä–æ—Ä—ã–≤ –≤ –∫–≤–∞–Ω—Ç–æ–≤–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–æ–ª–µ–µ 1000 –∫–º",
      }
    ]
  },
  {
    id: 2,
    events: [
      {
        year: "2019",
        text: "–í–ø–µ—Ä–≤—ã–µ –ø–æ–ª—É—á–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á—ë—Ä–Ω–æ–π –¥—ã—Ä—ã —Ç–µ–ª–µ—Å–∫–æ–ø–æ–º Event Horizon Telescope",
      },
      {
        year: "2020",
        text: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ñ–æ—Å—Ñ–∏–Ω–∞ –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä–µ –í–µ–Ω–µ—Ä—ã - –≤–æ–∑–º–æ–∂–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –∂–∏–∑–Ω–∏",
      },
      {
        year: "2021",
        text: "–ú–∞—Ä—Å–æ—Ö–æ–¥ Perseverance —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–æ—Å–∞–¥–∫—É –Ω–∞ –ú–∞—Ä—Å –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–∏—Å–∫–∏ –∂–∏–∑–Ω–∏",
      },
      {
        year: "2022",
        text: "–ó–∞–ø—É—Å–∫ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–µ—Å–∫–æ–ø–∞ James Webb - –Ω–æ–≤–æ–≥–æ –≥–ª–∞–∑–∞ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ –≤–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π",
      },
      {
        year: "2023",
        text: "–û—Ç–∫—Ä—ã—Ç–∏–µ —Ç—ã—Å—è—á –Ω–æ–≤—ã—Ö —ç–∫–∑–æ–ø–ª–∞–Ω–µ—Ç, –≤–∫–ª—é—á–∞—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–±–∏—Ç–∞–µ–º—ã–µ –º–∏—Ä—ã",
      }
    ]
  },
  {
    id: 1,
    events: [
      {
        year: "2020",
        text: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –º–∞—Å—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤–∞–∫—Ü–∏–Ω –ø—Ä–æ—Ç–∏–≤ COVID-19 –∑–∞ —Ä–µ–∫–æ—Ä–¥–Ω–æ –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫",
      },
      {
        year: "2021",
        text: "–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∑–µ–ª–µ–Ω–æ–π —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–µ: —Ä–µ–∫–æ—Ä–¥–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Å—ã –≤ –í–ò–≠",
      },
      {
        year: "2022",
        text: "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏ –º—É–∑—ã–∫—É —É—Ä–æ–≤–Ω—è —á–µ–ª–æ–≤–µ–∫–∞",
      },
      {
        year: "2023",
        text: "–ü—Ä–æ—Ä—ã–≤ –≤ —è–¥–µ—Ä–Ω–æ–º —Å–∏–Ω—Ç–µ–∑–µ: –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞",
      },
      {
        year: "2024",
        text: "–ö–æ–ª–æ–Ω–∏–∑–∞—Ü–∏—è –ú–∞—Ä—Å–∞: –ø–µ—Ä–≤—ã–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø–æ—Å–µ–ª–µ–Ω–∏—è –Ω–∞ –∫—Ä–∞—Å–Ω–æ–π –ø–ª–∞–Ω–µ—Ç–µ",
      }
    ]
  }
];

export const EventSlider = ({ className, top, left='143px', slidesPerView = 3  }: EventSliderProps) => {

  const swiperRef = useRef<SwiperClass | null>(null);
  const selectedPoint = useSelector(
    (state: RootState) => state.point.selectedPoint
  );

  // üîó –ù–∞—Ö–æ–¥–∏–º —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–æ—á–∫–∞ 6)
  const currentPointId = selectedPoint?.id || 6;
  const currentPointEvents = eventsByPoint.find(point => point.id === currentPointId)?.events || eventsByPoint[0].events;

  // üîÅ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏ ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –ø–µ—Ä–≤—ã–π —Å–ª–∞–π–¥
  useEffect(() => {
    if (swiperRef.current) {
      swiperRef.current.slideTo(0, 800); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ –ø–µ—Ä–≤–æ–º—É —Å–æ–±—ã—Ç–∏—é —Ç–æ—á–∫–∏
    }
  }, [currentPointId]);

  // üîÑ –ü—Ä–∏ —Å–º–µ–Ω–µ —Å–ª–∞–π–¥–∞ (—Å–≤–∞–π–ø, —Å—Ç—Ä–µ–ª–∫–∏) ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –∫—Ä—É–≥—É
  const handleSlideChange = () => {
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –≤—Ä–∞—â–µ–Ω–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    // dispatch(rotateToIndex(swiper.activeIndex));
  };

  return (
    <div className={`${className}`} style={{ top }} >
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}

      {/* Swiper —Å–ª–∞–π–¥–µ—Ä - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏ */}
      <Swiper
        breakpoints={{
    320: { slidesPerView: 2  },   // —Ç–µ–ª–µ—Ñ–æ–Ω—ã
    768: { slidesPerView: 2 },   // –ø–ª–∞–Ω—à–µ—Ç—ã
    1024: { slidesPerView: 3  },  // –¥–µ—Å–∫—Ç–æ–ø—ã
  }}
        modules={[Navigation, Autoplay, Pagination]}
        navigation
        pagination={{ clickable: true }}
        // autoplay={{ delay: 5000, disableOnInteraction: false }}
        onSwiper={(swiper) => {
          swiperRef.current = swiper;
        }}
        onSlideChange={handleSlideChange}
        slidesPerView={slidesPerView}
        spaceBetween={3}


        style={{ width: "1440px", height: "200px", margin: "0 auto" ,  marginTop: "320px",
    position: "relative",  left  }}
      >
        {currentPointEvents.map((event, index) => (
          <SwiperSlide key={`${currentPointId}-${index}`}>
            <div className={styles.block}>
              <p className={styles.blockText}>{event.text}</p>
              <div className={styles.blockYear}>{event.year}</div>
            </div>
          </SwiperSlide>
        ))}
      </Swiper>

  
    </div>
  );
};

export default EventSlider;

